# 设置源文件夹路径
source_folder <- "C:/Users/LENOVO/Desktop/lab/PEP CH"

# 设置目标文件夹路径
target_folder <- "C:/Users/LENOVO/Desktop/lab/PEP CH Combined"

# 获取所有文件夹的列表
subfolders <- list.dirs(source_folder, full.names = TRUE, recursive = FALSE)

# 定义目标文件名的正则表达式
pattern <- "PEP725_CH_(.*).csv"

# 遍历每个文件夹
for (subfolder in subfolders) {
  # 获取文件夹中的所有文件
  all_files <- list.files(subfolder, full.names = TRUE)
  
  # 筛选出包含目标文件的文件
  target_files <- grep(pattern, all_files, value = TRUE, ignore.case = TRUE)
  
  # 移动文件到目标文件夹
  file.copy(all_files, target_folder, overwrite = TRUE)
}
